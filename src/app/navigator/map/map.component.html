<mgl-map
  *ngIf="center && routes"
  [style]="'mapbox://styles/mapbox/outdoors-v11'"
  [zoom]="[zoom]"
  [pitch]="[pitch]"
  [bearing]="[bearing]"
  movingMethod="easeTo"
  [interactive]="false"
  [center]="center"
>
  <ng-container *ngFor="let layer of layers">
    <mgl-geojson-source
      id="route-{{layer.id}}"
    >
      <mgl-feature [geometry]="layer.route.geometry"></mgl-feature>
    </mgl-geojson-source>
    <mgl-layer
      id="layer-route-{{layer.id}}"
      source="route-{{layer.id}}"
      type="line"
      [paint]="{
      'line-color': getRouteColor(layer.route),
      'line-width': 6
    }"
    ></mgl-layer>

  </ng-container>

  <mgl-marker
    *ngIf="marker"
    [lngLat]="marker"
    pitchAlignment="map"
    rotationAlignment="map"
  >
    <div class="here" [style.transform]="markerBearingStyle">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 434 437">
        <polygon points="37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18" style="fill:#579120"/>
        <polygon points="397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13" style="fill:#6fad2d"/>
        <polygon points="217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46" style="fill:#315112"/>
      </svg>
    </div>
  </mgl-marker>
  <mgl-marker *ngFor="let node of nodes"
              [lngLat]="node.location"
  >
    <div class="node-marker">{{node.number}}</div>
  </mgl-marker>
</mgl-map>
